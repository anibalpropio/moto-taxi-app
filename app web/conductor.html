<!DOCTYPE html>
<html>
<head>
    <title>ðŸš” Panel Conductor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        #solicitud { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>ðŸš” Solicitudes de Clientes</h1>
    <div id="solicitudes"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script>
        // Misma configuraciÃ³n que en cliente.html
        const firebaseConfig = { /* ... */ };
        firebase.initializeApp(firebaseConfig);

        // Escuchar nuevas solicitudes
        firebase.database().ref('solicitudes').orderByChild('status').equalTo('esperando').on('value', snapshot => {
            const solicitudes = snapshot.val() || {};
            document.getElementById("solicitudes").innerHTML = "";

            Object.keys(solicitudes).forEach(telefono => {
                const solicitud = solicitudes[telefono];
                const div = document.createElement("div");
                div.className = "solicitud";
                div.innerHTML = `
                    <p><strong>TelÃ©fono:</strong> ${telefono}</p>
                    <p><strong>UbicaciÃ³n:</strong> <a href="https://maps.google.com/?q=${solicitud.ubicacion}" target="_blank">Ver mapa</a></p>
                    <button onclick="aceptarCarrera('${telefono}')">âœ… Aceptar Carrera</button>
                `;
                document.getElementById("solicitudes").appendChild(div);
            });
        });

        function aceptarCarrera(telefonoCliente) {
            // Actualizar estado en Firebase
            firebase.database().ref(`solicitudes/${telefonoCliente}`).update({
                status: "aceptado",
                conductor: "CONDUCTOR_123" // Reemplaza con ID del conductor
            });

            // Opcional: Enviar WhatsApp al cliente
            window.open(`https://wa.me/52${telefonoCliente}?text=âœ…%20Moto%20en%20camino!%20LlegarÃ©%20en%205%20minutos`);
        }
    </script>
</body>
</html>